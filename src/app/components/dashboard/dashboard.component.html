<div class="navbar">
  <img src="assets/bitaskicon.png" alt="BiTASK Icon" class="logo" />
  <span class="title">BiTASK</span>
  <div class="user-info-container">
    <!-- Div yerine buton kullandım ve tabindex kaldırdım -->
    <button
      class="user-circle"
      (click)="openUserPopup()"
      (keydown.enter)="openUserPopup()"
      (keydown.space)="openUserPopup()"
    >
      <span class="user-initials">{{ userInitials }}</span>
    </button>
    <!-- Logout Button -->
    <div class="logout-container">
      <img src="assets/logouticon.png" alt="Logout Icon" class="logout-icon" />
      <button class="logout-button" (click)="logout()">Logout</button>
    </div>
  </div>
</div>

<div class="popup" *ngIf="isUserPopupOpen">
  <img src="assets/usericon.png" alt="User Icon" class="user-icon" />
  <p>
    <strong>{{ userFullName }}</strong>
  </p>
  <p>
    <strong>{{ userEmail }}</strong>
  </p>
  <p>
    <strong>{{ userJobTitle }}</strong>
  </p>

  <!-- Statü Değiştirme İkonunu button yaptım -->
  <div class="status-container">
    <p>
      <strong>{{ userStatus }}</strong>
    </p>
    <button
      class="status-change-icon"
      (click)="openStatusPopup()"
      (keydown.enter)="openStatusPopup()"
      (keydown.space)="openStatusPopup()"
    >
      <span>&gt;</span>
    </button>
  </div>
</div>

<!-- Status Popup -->
<div class="status-popup" *ngIf="isStatusPopupOpen">
  <ul class="status-list">
    <li>
      <button
        class="status-item online-status"
        (click)="onStatusSelect('ONLINE')"
        (keydown.enter)="onStatusSelect('ONLINE')"
        (keydown.space)="onStatusSelect('ONLINE')"
      >
        <span class="status-circle"></span>
        <span class="status-text">Online</span>
      </button>
    </li>
    <li>
      <button
        class="status-item away-status"
        (click)="onStatusSelect('AWAY')"
        (keydown.enter)="onStatusSelect('AWAY')"
        (keydown.space)="onStatusSelect('AWAY')"
      >
        <span class="status-circle"></span>
        <span class="status-text">Away</span>
      </button>
    </li>
    <li>
      <button
        class="status-item busy-status"
        (click)="onStatusSelect('BUSY')"
        (keydown.enter)="onStatusSelect('BUSY')"
        (keydown.space)="onStatusSelect('BUSY')"
      >
        <span class="status-circle"></span>
        <span class="status-text">Busy</span>
      </button>
    </li>
  </ul>
</div>

<style>
  .status-list {
    list-style: none;
    padding: 0;
  }

  .status-item {
    display: flex;
    align-items: center;
    padding: 5px 10px;
    background: none;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  .status-circle {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: 8px;
  }

  .online-status {
    color: #00ff87;
  }
  .online-status .status-circle {
    background-color: #00ff87;
  }
  .online-status:hover {
    background-color: #00ff87;
    color: #16262c;
  }

  .away-status {
    color: #ffdb58;
  }
  .away-status .status-circle {
    background-color: #ffdb58;
  }
  .away-status:hover {
    background-color: #ffdb58;
    color: #16262c;
  }

  .busy-status {
    color: #ff4136;
  }
  .busy-status .status-circle {
    background-color: #ff4136;
  }
  .busy-status:hover {
    background-color: #ff4136;
    color: #16262c;
  }
</style>

<div class="dashboard-container">
  <h1>Welcome to the Dashboard</h1>
  <p>This is your main application page.</p>
</div>
