<div class="navbar">
  <img src="assets/bitaskicon.png" alt="BiTASK Icon" class="logo" />
  <span class="title">BiTASK</span>
  <!-- Dropdown ile mevcut board listesi -->
  <p-dropdown
    [(ngModel)]="selectedBoard"
    [options]="boards"
    optionLabel="name"
    placeholder="Select a board"
    emptyMessage="No board yet!"
    class="board-dropdown"
    [ngClass]="{ 'neon-red-border': boards.length === 0 }"
    scrollHeight="200px"
  >
    <ng-template pTemplate="selectedItem">
      <div
        style="
          font-family: 'Roboto Slab', serif;
          font-optical-sizing: auto;
          font-weight: 600;
          font-style: normal;
        "
      >
        {{ selectedBoard?.name }}
      </div>
    </ng-template>
    <ng-template let-board pTemplate="item">
      <div
        class="board-item"
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-family: 'Roboto Slab', serif;
          font-optical-sizing: auto;
          font-weight: 600;
          font-style: normal;
        "
      >
        <span>{{ board.name }}</span>
        <div style="display: flex; gap: 10px">
          <i
            class="pi pi-sliders-h"
            title="Settings"
            style="
              cursor: pointer;
              color: #1f51ff;
              margin-left: 10px;
              transition: transform 0.3s ease;
            "
            (mouseenter)="onMouseEnter($event)"
            (mouseleave)="onMouseLeave($event)"
          ></i>
          <i
            class="pi pi-trash"
            (click)="openDeletePopup(board.id)"
            (keydown.enter)="openDeletePopup(board.id)"
            (keydown.space)="openDeletePopup(board.id)"
            title="Delete Board"
            style="cursor: pointer; color: red; margin-left: 10px"
          ></i>
        </div>
      </div>
    </ng-template>
  </p-dropdown>

  <!-- Silme Onay Pop-up'ı -->
  <p-dialog
    header="Are you sure you want to delete this board?"
    [(visible)]="isDeletePopupOpen"
    [modal]="true"
    [closable]="false"
    style="width: '350px'"
    [styleClass]="'delete-dialog'"
  >
    <div class="confirmation-content">
      <div
        class="confirmation-buttons"
        style="display: flex; justify-content: center; gap: 10px"
      >
        <button
          pButton
          label="YES"
          class="p-button-success"
          (click)="deleteBoard()"
          style="margin-right: 10px"
        ></button>
        <button
          pButton
          label="NO"
          class="p-button-danger"
          (click)="cancelDelete()"
        ></button>
      </div>
      <!-- Başarı mesajı alanı -->
      <div *ngIf="isSuccessMessageVisible" class="success-message">
        <i class="pi pi-check-circle"></i>
        <span>The board has been deleted successfully!</span>
      </div>
    </div>
  </p-dialog>

  <!-- PrimeNG Butonu ile Create a New Board-->
  <button
    pButton
    label="Create a New Board"
    icon="pi pi-plus"
    iconPos="right"
    class="p-button-rounded p-button-success p-mr 2 custom-hover new-board-button kanit-semibold"
    style="background-color: #00ff87; color: #16262c; margin-left: 100px"
    (click)="openBoardPopup()"
  ></button>
  <!-- PrimeNG Dialog ile Create Board Pop-up'ı -->
  <p-dialog
    header="Creating Board"
    [(visible)]="isBoardPopupOpen"
    [modal]="true"
    [closable]="false"
    style="width: '450px'; height: '350px'"
    styleClass="centered-dialog"
  >
    <div class="p-text-center create-board-popup">
      <img
        src="assets/createboardicon.png"
        alt="Create Board Icon"
        class="create-board-icon"
      />
    </div>
    <div class="p-field">
      <label for="boardName"></label>
      <input
        pInputText
        id="boardName"
        [(ngModel)]="newBoardName"
        [placeholder]="placeholderText"
        (focus)="clearPlaceholder()"
        (blur)="restorePlaceholder()"
        style="
          width: 101%;
          padding: 10px;
          border: 1px solid #00ff87;
          border-radius: 5px;
          background-color: #c4e1f6;
          color: #243642;
          text-align: center;
          box-sizing: border-box;
        "
      />
    </div>
    <!-- Başarı mesajı alanı -->
    <div *ngIf="isSuccessMessageVisible" class="success-message">
      <i class="pi pi-check-circle"></i>
      <span>The board has been created successfully!</span>
    </div>
    <!-- Hata mesajı alanı -->
    <div *ngIf="isErrorMessageVisible" class="error-message">
      <i class="pi pi-exclamation-circle"></i>
      <span>{{ errorMessage }}</span>
    </div>
    <p-footer class="footer-buttons">
      <button
        pButton
        label="CREATE"
        icon="pi pi-check"
        (click)="createBoard()"
        class="p-button-rounded p-button-success"
      ></button>
      <button
        pButton
        label="CANCEL"
        icon="pi pi-times"
        (click)="isBoardPopupOpen = false"
        class="p-button-rounded p-button-secondary"
      ></button>
    </p-footer>
  </p-dialog>
  <div class="user-info-container">
    <!-- Div yerine buton kullandım ve tabindex kaldırdım -->
    <button
      class="user-circle"
      (click)="openUserPopup()"
      (keydown.enter)="openUserPopup()"
      (keydown.space)="openUserPopup()"
    >
      <span class="user-initials">{{ userInitials }}</span>
    </button>
    <!-- Logout Button -->
    <div class="logout-container">
      <img src="assets/logouticon.png" alt="Logout Icon" class="logout-icon" />
      <button class="logout-button" (click)="logout()">Logout</button>
    </div>
  </div>
</div>

<div class="popup" *ngIf="isUserPopupOpen">
  <img src="assets/usericon.png" alt="User Icon" class="user-icon" />
  <p>
    <strong>{{ userFullName }}</strong>
  </p>
  <p>
    <strong>{{ userEmail }}</strong>
  </p>
  <p>
    <strong>{{ userJobTitle }}</strong>
  </p>

  <!-- Statü Değiştirme İkonunu button yaptım -->
  <div class="status-container">
    <p>
      <strong>{{ userStatus }}</strong>
    </p>
    <button
      class="status-change-icon"
      (click)="openStatusPopup()"
      (keydown.enter)="openStatusPopup()"
      (keydown.space)="openStatusPopup()"
    >
      <span>&gt;</span>
    </button>
  </div>
</div>

<!-- Status Popup -->
<div class="status-popup" *ngIf="isStatusPopupOpen">
  <ul class="status-list">
    <li>
      <button
        class="status-item online-status"
        (click)="onStatusSelect('ONLINE')"
        (keydown.enter)="onStatusSelect('ONLINE')"
        (keydown.space)="onStatusSelect('ONLINE')"
      >
        <span class="status-circle"></span>
        <span class="status-text">Online</span>
      </button>
    </li>
    <li>
      <button
        class="status-item away-status"
        (click)="onStatusSelect('AWAY')"
        (keydown.enter)="onStatusSelect('AWAY')"
        (keydown.space)="onStatusSelect('AWAY')"
      >
        <span class="status-circle"></span>
        <span class="status-text">Away</span>
      </button>
    </li>
    <li>
      <button
        class="status-item busy-status"
        (click)="onStatusSelect('BUSY')"
        (keydown.enter)="onStatusSelect('BUSY')"
        (keydown.space)="onStatusSelect('BUSY')"
      >
        <span class="status-circle"></span>
        <span class="status-text">Busy</span>
      </button>
    </li>
  </ul>
</div>

<style>
  .status-list {
    list-style: none;
    padding: 0;
  }

  .status-item {
    display: flex;
    align-items: center;
    padding: 5px 10px;
    background: none;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  .status-circle {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: 8px;
  }

  .online-status {
    color: #00ff87;
  }
  .online-status .status-circle {
    background-color: #00ff87;
  }
  .online-status:hover {
    background-color: #00ff87;
    color: #16262c;
  }

  .away-status {
    color: #ffdb58;
  }
  .away-status .status-circle {
    background-color: #ffdb58;
  }
  .away-status:hover {
    background-color: #ffdb58;
    color: #16262c;
  }

  .busy-status {
    color: #ff4136;
  }
  .busy-status .status-circle {
    background-color: #ff4136;
  }
  .busy-status:hover {
    background-color: #ff4136;
    color: #16262c;
  }
</style>

<div class="dashboard-container">
  <h1>Welcome to the Dashboard</h1>
  <p>This is your main application page.</p>
</div>
